{% extends "base.html" %}
{% block content %}
<div class="container py-4">

  <h2 class="mb-4 text-center fw-bold text-primary">ðŸ“Š Dashboard - New Vision IT Ltd.</h2>

  <!-- Summary Cards -->
  <div class="row g-4 mb-5">
    <div class="col-md-4">
      <div class="card border-success shadow-lg h-100">
        <div class="card-body text-center">
          <h5 class="card-title text-success fw-bold">Total Income</h5>
          <h2 class="fw-bold text-success">{{ income }} à§³</h2>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card border-danger shadow-lg h-100">
        <div class="card-body text-center">
          <h5 class="card-title text-danger fw-bold">Total Expense</h5>
          <h2 class="fw-bold text-danger">{{ expense }} à§³</h2>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card border-primary shadow-lg h-100">
        <div class="card-body text-center">
          <h5 class="card-title text-primary fw-bold">Net Balance</h5>
          <h2 class="fw-bold text-primary">{{ balance }} à§³</h2>
        </div>
      </div>
    </div>
  </div>

  <!-- Column Chart -->
  <div class="card shadow-lg border-0">
    <div class="card-header bg-primary text-white text-center fw-bold">
      Income vs Expense Overview
    </div>
    <div class="card-body">
      <canvas id="financeChart" height="120"></canvas>
    </div>
  </div>

</div>

<!-- Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  const ctx = document.getElementById('financeChart').getContext('2d');

  const labels = {{ labels|tojson }};
  const incomeData = {{ income_data|tojson }};
  const expenseData = {{ expense_data|tojson }};

  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: labels,
      datasets: [
        {
          label: 'Income',
          data: incomeData,
          backgroundColor: 'rgba(7, 255, 98, 0.7)',
          borderColor: 'rgba(1, 133, 49, 1)',
          borderWidth: 1
        },
        {
          label: 'Expense',
          data: expenseData,
          backgroundColor: 'rgba(238, 12, 12, 0.7)',
          borderColor: 'rgba(160, 0, 0, 1)',
          borderWidth: 1
        }
      ]
    },
    options: {
      responsive: true,
      plugins: {
        legend: { position: 'top' },
        title: {
          display: true,
          text: 'Monthly Financial Summary',
          font: { size: 16, weight: 'bold' }
        }
      },
      scales: {
        x: {
          ticks: { color: '#333', font: { weight: 'bold' } },
          grid: { display: true }
          
        },
        y: {
          beginAtZero: true,
          ticks: { color: '#333', font: { weight: 'bold' } },
          grid: { color: 'rgba(0,0,0,0.1)' }
        }
      }
    }
  });
</script>
{% endblock %}
