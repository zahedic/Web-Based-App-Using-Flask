
  <!-- ======================== dashboard.html  ======================== -->
   <!-- ========================
    The page displays:
     - Inheritance: base.html file 
     - Total Income, Total Expense, and Net Balance summary cards
     - A financial comparison chart (Income vs Expense) using Chart.js
     
    ======================== -->


{% extends "base.html" %}
{% block content %}

<!-- ====================== Dashboard Container ====================== -->
<div class="container py-4">

  <!-- ====================== Dashboard Title ====================== -->
  <h2 class="mb-4 text-center fw-bold text-primary">ðŸ“Š Dashboard - New Vision IT Ltd.</h2>

    <!-- ====================== Summary Cards Section ====================== -->
  <div class="row g-4 mb-5">

      <!-- ---------- Total Income Card ---------- -->
    <div class="col-md-4">
      <div class="card border-success shadow-lg h-100">
        <div class="card-body text-center">
          <h5 class="card-title text-success fw-bold">Total Income</h5>
          <h2 class="fw-bold text-success">{{ income }} à§³</h2>
        </div>
      </div>
    </div>

    <!-- ---------- Total Expense Card ---------- -->
    <div class="col-md-4">
      <div class="card border-danger shadow-lg h-100">
        <div class="card-body text-center">
          <h5 class="card-title text-danger fw-bold">Total Expense</h5>
          <h2 class="fw-bold text-danger">{{ expense }} à§³</h2>
        </div>
      </div>
    </div>

     <!-- ---------- Net Balance Card ---------- -->
    <div class="col-md-4">
      <div class="card border-primary shadow-lg h-100">
        <div class="card-body text-center">
          <h5 class="card-title text-primary fw-bold">Net Balance</h5>
          <h2 class="fw-bold text-primary">{{ balance }} à§³</h2>
        </div>
      </div>
    </div>
  </div>
<!-- ====================== End of Summary Cards ====================== -->


    <!-- ====================== Chart Section ====================== -->
  <div class="card shadow-lg border-0">
    <div class="card-header bg-primary text-white text-center fw-bold">
      Income vs Expense Overview
    </div>
    <div class="card-body">
      <canvas id="financeChart" height="120"></canvas>
    </div>
  </div>

</div>

<!-- ====================== End of Dashboard Container ====================== -->


<!-- ====================== Chart.js Script ====================== -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  // ---------- Get Canvas Context ----------
  const ctx = document.getElementById('financeChart').getContext('2d');

  // ---------- Data from Flask (converted to JSON) ----------
  const labels = {{ labels|tojson }};
  const incomeData = {{ income_data|tojson }};
  const expenseData = {{ expense_data|tojson }};

  // ---------- Initialize Chart ----------
  new Chart(ctx, {
    type: 'bar',                                          // Bar chart type
    data: {
      labels: labels,                                     // X-axis labels (months or categories)
      datasets: [
        {
          label: 'Income',
          data: incomeData,
          backgroundColor: 'rgba(5, 133, 54, 0.99)',    // Green bars
          borderColor: 'rgba(4, 141, 72, 0.99)',
          borderWidth: 1
        },
        {
          label: 'Expense',
          data: expenseData,
          backgroundColor: 'rgba(156, 28, 66, 1)',      // Red bars
          borderColor: 'rgba(131, 0, 109, 1)',
          borderWidth:1
        }
      ]
    },

    // ---------- Chart Options ----------
    options: {
      responsive: true,                                   // Makes the chart responsive
      plugins: {
        legend: { position: 'top' },                      // Position of the legend
        title: {
          display: true,
          text: 'Monthly Financial Summary',              // Chart title
          font: { size: 16, weight: 'bold' }
        }
      },
      scales: {
        x: {
          ticks: { color: '#c90054ff', font: { size: 16, weight: 'bold'  } },
          grid: { display: true },
          
          
        },
        y: {
          beginAtZero: true,                               // Y-axis starts from zero
          ticks: { color: '#333', font: { weight: 'bold' } },
          grid: { color: 'rgba(0,0,0,0.1)' }
        }
      }
    }
  });
  
</script>
{% endblock %}
